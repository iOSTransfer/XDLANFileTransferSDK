UDP组播是采用的无连接,数据报的连接方式,所以是不可靠的.也就是数据能不能到达接受端和数据到达的顺序都是不能保证的.但是由于UDP不用保证数据的可靠性,所有数据的传送速度是很快的.

1. 组播的“根”

　　组播从概念上来讲分为两部分：控制部分和数据部分。控制部分决定着组播的对象的组织方式。而数据部分决定了数据的传输方式。

　　控制层有“有根”，“无根”两种情况。对于有根的控制层，存在着一个root和若干个leaf. root负责管理这个组播组，只有他能邀请一个leaf加入一个组播组（ATM就是有根控制的一个典型的例子）。对于无根的控制层，没有root,只有若干的leaf. 每一个leaf都能自己加入一个组播组（IP就是无根控制的典型例子）

　　数据层也有“有根”，“无根”两种情况。对于有根数据层，从root发出的数据能到达每一个leaf,而从leaf发出的数据只能到达root.对于无根数据层，每一个leaf发出的数据能到达组播组中的每一个leaf（甚至包括他自己）。每一个leaf也能接受组播组里的任何数据包。

二．IP组播地址

IP组播通信需要一个特殊的组播地址.IP组播地址是一组D类IP地址，范围从224.0.0.0 到 239.255.255.255。其中还有很多地址是为特殊的目的保留的。224.0.0.0到224.0.0.255的地址最好不要用，因为他们大多是为了特殊的目的保持的（比如IGMP协议）

三．IGMP协议

　　IGMP(internet网关管理协议)是IP组播的基础.在IP协议出现以后，为了加入对组播的支持，IGMP产生了。IGMP所做的实际上就是告诉路由器，在这个路由器所在的子网内有人对发送到某一个组播组的数据感兴趣，这样当这个组播组的数据到达后面，路由器就不会抛弃它，而是把他转送给所有感兴趣的客户。假如不同子网内的A,B要进行组播通信，那么，位与A,B之间的所有路由器必须都要支持IGMP协议，否则A,B之间不能进行通信。

　　当一个应用加入一个组播组后，就会向这个子网的所有路由器发送一个IGMP加入命令，告诉他子网内有人对发送到某一个组播组的数据感兴趣.路由器也会定时向子网内的所有终端发送一条查询消息，用于询问是否还有人对某个组播组的数据感兴趣。如果有的话，终端就会回应一条IGMP消息，路由器则继续转发这个组播组的数据。如果没有人回应这条消息，那么路由器就认为已经没有终端对这个组播组的数据感兴趣，就不会在转发关于这个组播组的数据了。在IGMP第二版中，一个终端推出组播组以后，会向路由器发送一个推出消息，路由器也会通过这个消息来判断是否还要继续转发关于这个组播组的数据了（IGMP第一版中没有这个功能）[这些事情都是底层的系统做的，你只要坐享其成就好了]

四. winsock 1组播

　　winsock 1的组播主要有以下几个步骤：

1． 建立支持数据报的scoket
2． 把socket和本地的一个端口绑定（以后会通过这个端口进行数据的收发）
3． 通过setsockopt  IP_ADD_MEMBERSHIP加入一个组播组
4． 然后就能通过sendto / recvfrom进行数据的收法
5． 通过 setsockopt IP_DROP_MEMBERSHIP离开一个组播组
6． 关闭socket

　　如果你仅仅是想向一个组播组发送数据，而不要接受数据，那么可不用加入组播组，而直接通过sendto向组播组发送数据


五.winsock 2组播

　　winsock 2组播主要是通过WSAJoinLeaf来实现的（WSAJoinLeaf的行为，返回值根据socket的模式，组播的实现构架有很大的关系）

　　winsock 2组播的主要有以下几个步骤

1. 建立支持数据报的socket(用WSASocket建立socket，同2. 时设置组播的一些属性)
3. 把socket和本地的一个端口绑定（以后会通过这个端口进行数据的收发）
4. 通过WSAJoinLeaf加入一个组播组
5. 通过sendto / recvfrom进行数据的收发
6. 直接关闭socket，

7. 退出组播组